<?xml version="1.0"?>
<root main_tree_to_execute="FindToyBT">
    <!-- ////////// -->
    <BehaviorTree ID="FindToyBT">
        <Sequence>
            <RetryUntilSuccesful num_attempts="-1">
                <Fallback>
                    <Inverter>
                        <Action ID="RetrieveToyRoom" toy_found="{result}" retrieve_room="bedroom" />
                    </Inverter>
                    <SubTree ID="SearchToyBT" toy_found_result="result" room_to_go="retrieve_room" />
                </Fallback>
            </RetryUntilSuccesful>
            <Condition ID="ToyInSight"/>
        </Sequence>
    </BehaviorTree>
    <!-- ////////// -->
    <BehaviorTree ID="SearchToyBT">
        <Sequence name="SearchToy">
            <Action ID="GotoRoom" room="{room_to_go}"/>
            <Action ID="EnterRoom"/>
            <Action ID="InspectRoomToy" toy_pose="0;0" toy_type="ball"/>
            <SetBlackboard output_key="toy_pose" value="{toy_pose}"/>
            <Condition ID="ToyFound" toy_found_result="false"/>
        </Sequence>
    </BehaviorTree>
    <!-- ////////// -->
</root>

